<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js正则表达式分组() 不捕获(?:) 断言 | mgso</title>
    <meta name="description" content="js 正则表达式 分组() 不捕获(?:) 断言">
    
    <meta name="keywords" content="js正则表达式分组() 不捕获(?:) 断言 零宽断言">
    <link rel="preload" href="/assets/css/0.styles.ae5b19b5.css" as="style"><link rel="preload" href="/assets/js/app.6dcea125.js" as="script"><link rel="preload" href="/assets/js/9.a2bf4d49.js" as="script"><link rel="prefetch" href="/assets/js/10.cc7bdc45.js"><link rel="prefetch" href="/assets/js/2.8a19d578.js"><link rel="prefetch" href="/assets/js/3.6d460d2e.js"><link rel="prefetch" href="/assets/js/4.d28bd1d6.js"><link rel="prefetch" href="/assets/js/5.a05cf3b2.js"><link rel="prefetch" href="/assets/js/6.7056fa6f.js"><link rel="prefetch" href="/assets/js/7.44d3c77a.js"><link rel="prefetch" href="/assets/js/8.b9ebac4f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ae5b19b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">mgso</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/mgsod" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/mgsod" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>前端</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/front-end/zipImg.html" class="sidebar-link">js压缩图片(上传)</a></li><li><a href="/front-end/reg.html" class="active sidebar-link">正则分组(),不捕获(?:)以及断言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/reg.html#分组" class="sidebar-link">分组</a></li><li class="sidebar-sub-header"><a href="/front-end/reg.html#不捕获" class="sidebar-link">不捕获</a></li><li class="sidebar-sub-header"><a href="/front-end/reg.html#断言" class="sidebar-link">断言</a></li></ul></li><li><a href="/front-end/for.html" class="sidebar-link">for in 和 for of</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>ssr相关</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/ssr/createSsr.html" class="sidebar-link">搭建ssr</a></li><li><a href="/ssr/ssrClient.html" class="sidebar-link">ssr客户端配置</a></li><li><a href="/ssr/serverSpeeder.html" class="sidebar-link">更换内核并安装锐速</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="分组"><a href="#分组" aria-hidden="true" class="header-anchor">#</a> 分组</h2> <p>分组在正则中用()表示，分组的作用有两个：</p> <p>1.将某些规律看成是一组，然后进行组级别的重复，可以得到意想不到的效果。</p> <p>2.分组之后，可以通过后向引用简化表达式（\1 或者$1）。</p> <p><strong>eg:</strong></p> <p>先来看第一个作用，对于IP地址的匹配，简单的可以写为如下形式：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token regex">/\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但仔细观察，我们可以发现一定的规律，可以把<code>.\d{1,3}</code>看成一个整体，也就是把他们看成一组，再把这个组重复3次即可。表达式如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token regex">/\d{1,3}(.\d{1,3}){3}/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>再来看第二个作用，就拿匹配<code>&lt;title&gt;xxx&lt;/title&gt;</code>标签来说，简单的正则可以这样写：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token regex">/&lt;title&gt;.*&lt;\/title&gt;/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看出，上边表达式中有两个title，完全一样，其实可以通过分组简写。表达式如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token regex">/&lt;(title)&gt;.*&lt;\/\1&gt;/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>对于分组而言，整个表达式永远算作第0组</code> 在上述例中，第0组是&lt;(title)&gt;.*&lt;/\1&gt;，然后从左到右，依次为分组编号，因此，(title)是第1组</p> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>用\1这种语法，可以引用某组的文本内容，但不能引用正则表达式。</p></div> <p>例如刚刚的IP地址正则表达式为<code>\d{1,3}(.\d{1,3}){3}</code>，里边的<code>\d{1,3}</code>重复了两次，如果利用后向引用简化，表达式如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token regex">/(\d{1,3})(.\1){3}/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>经过实际测试，会发现这样写是错误的，为什么呢？</p> <p><code>后向引用，引用的仅仅是文本内容，而不是正则表达式！</code></p> <p><code>也就是说，组中的内容一旦匹配成功，后向引用，引用的就是匹配成功后的内容，引用的是结果，而不是表达式。</code></p> <p>因此，<code>(\d{1,3})(.\1){3}</code>这个表达式实际上匹配的是四个数都相同的IP地址，比如：<code>123.123.123.123</code>。</p> <h2 id="不捕获"><a href="#不捕获" aria-hidden="true" class="header-anchor">#</a> 不捕获</h2> <p>不捕获其实就是在分组的前边加上<code>?:</code>，可以在不需要捕获分组的表达式中使用，加快表达式执行速度。</p> <p>就拿匹配</p><title>xxx</title>标签来说，通过分组可以简写为<p></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token regex">/&lt;(title)&gt;.*&lt;\/\1&gt; /</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但是如果是(?:title),则\1就不能捕获到这个子组了，只能捕获第一个出现的非?:的分组作为\1</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>(?:title)本身会在完整匹配中，只是不在子组中，注意和断言的区别</p></div> <h2 id="断言"><a href="#断言" aria-hidden="true" class="header-anchor">#</a> 断言</h2> <p><code>所谓断言，就是指明某个字符串前边或者后边，将会出现满足某种规律的字符串</code>
就拿匹配<code>&lt;title&gt;xxx&lt;/title&gt;</code>标签来说
我们想要的是xxx，它没有规律，但是它前边肯定会有<code>&lt;title&gt;</code>,后边肯定会有<code>&lt;/title&gt;</code>，这就足够了
想指定xxx前肯定会出现<code>&lt;title&gt;</code>，就用正后发断言，表达式：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/(?&lt;=&lt;title&gt;).*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>想指定xxx后边肯定会出现，就用正先行断言，表达式：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/.*(?=&lt;\/title&gt;)/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>两个加在一起，就是</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/(?&lt;=&lt;title&gt;).*(?=&lt;\/title&gt;)/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>对正后发和正先行的解释：</strong></p> <p>其实掌握了规律，就很简单了，无论是先行还是后发，都是相对于xxx而言的，也就是相对于目标字符串而言。</p> <p>假如目标字符串后边有条件，可以理解为目标字符串在前，就用先行断言，放在目标字符串之后。</p> <p>假如目标字符串前边有条件，可以理解为目标字符串在后，就用后发断言，放在目标字符串之前。</p> <p>假如指定满足某个条件，就是正。</p> <p>假如指定不满足某个条件，就是负。</p> <p>断言只是条件，帮你找到真正需要的字符串，本身并不会匹配！</p> <p><strong>！表示正好相反的意思，就是把=换成了！，看表格解释，X代表字符</strong></p> <table><thead><tr><th>表达式</th> <th style="text-align:center">释义</th></tr></thead> <tbody><tr><td>(?=X )</td> <td style="text-align:center">零宽度正先行断言。仅当子表达式 X 在 此位置的右侧匹配时才继续匹配。例如，\w+(?=\d) 与后跟数字的单词匹配，而不与该数字匹配。此构造不会回溯。</td></tr> <tr><td>(?!X)</td> <td style="text-align:center">零宽度负先行断言。仅当子表达式 X 不在 此位置的右侧匹配时才继续匹配。例如，例如，\w+(?!\d) 与后不跟数字的单词匹配，而不与该数字匹配 。</td></tr> <tr><td>(?&lt;=X)</td> <td style="text-align:center">零宽度正后发断言。仅当子表达式 X 在 此位置的左侧匹配时才继续匹配。例如，(?&lt;=19)99 与跟在 19 后面的 99 的实例匹配。此构造不会回溯。</td></tr> <tr><td>(?&lt;!X)</td> <td style="text-align:center">零宽度负后发断言。仅当子表达式 X 不在此位置的左侧匹配时才继续匹配。例如，(?&lt;!19)99 与不跟在 19 后面的 99 的实例匹配</td></tr></tbody></table></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">9/7/2018, 12:01:16 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/front-end/zipImg.html" class="prev">
          js压缩图片(上传)
        </a></span> <span class="next"><a href="/front-end/for.html">
          for in 和 for of
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.6dcea125.js" defer></script><script src="/assets/js/9.a2bf4d49.js" defer></script>
  </body>
</html>
